# Writeup 10 - Crypto I

Name: Andrew Figlarz
Section: 0101

I pledge on my honor that I have not given or received any unauthorized assistance on this assignment or examination.

Digital acknowledgement: Andrew Figlarz


## Assignment details

### Part 1 (45 Pts)

1.	What is the structure of the ledger file format? Include exact byte offsets when static.
1.	The ledger contains the key hash, IV, ciphertext hash and the cipher text. Each component is 16 bytes except the cipher text itself which is sizeOf(cipher text) – 48. 3*16 = 48 bytes
2.	What specific cryptographic implementations are used by the program? I.e. not "hashing", but a specific algorithm. Why might this pose a risk?
1.	This program uses MD5 as a hashing algorithm and AES128 as a symmetric encryption algorithm. Using MD5 is a security risk because people have found a way to exploit it. Using any hashing algorithm carries with it some risk because of collisions – where two different things hash out to the same output. Using SHA256 or SHA512 would have been more secure and lead to a lower risk of collision. After doing some research, it seems that AES128 is decently secure for the time being. 
3.	What information, if any, are you able to derive from ledger.bin without decrypting it at all?
1.	You can see that the key is hashed twice with MD5. This is obtained by looking that the starting 16 bytes of the file. You can also see that the total file is 656 bytes.
4.	How does the application ensure Confidentiality? How is the encryption key derived?
1.	Messages get encrypted before being written to the ledger. They are getting encrypted with AES128 and then hashed with MD5. The key gets generated by hashing a text with MD5 then taking the starting two bytes of that hashed text and hashing it again.
5.	How does the application ensure Integrity? Is this flawed in any way?
1.	It compares the given password against the generated ciphertext hash to see if they are equal. This is good, but it doesn’t guarantee that the hashes were not modified by a middleman. 
6.	How does the application ensure Authenticity? Is this flawed in any way?
1.	It checks if it was given command line arguments for authenticity. This is flawed because you can utilize the “`” character to fake it.  
7.	How is the initialization vector generated and subsequently stored? Are there any issues with this implementation?
1.	The IV is stored in dynamic memory in the heap. If someone were to investigate the heap as the program was running (like what we did during one of our binaries assignments) they could possibly find the IV.

### Part 2 (45 Pts)

Super Secret Ledger
Due to my secure cryptographic scheme, nothing I write here can be read by anyone!
I will also be able to tell when my ledger is tampered with due to my checksums.
I finally have a place to store my flag without anyone finding it!
CMSC389R-{k3y5p4c3_2_sm411}

The flag is: CMSC389R-{k3y5p4c3_2_sm411}

### Part 3 (10 Pts)

The ideal balance lies somewhere between obscurity and cryptographic sophistication. When you want to store data securely, your initial instinct is to try and hide it as best you can. A good example of that would be hiding it in a nondisclosed location, under lock and key. This method ensures that your data will be secure if no one finds that nondisclosed location and has the key to open the lock guarding the information inside. Although not likely, it is entirely possible that your information will be found and unlocked by someone, so relying on this method alone is not full proof. Now, if you coupled that super-secret hiding spot with a secure cryptographic lock instead of a plain old key, then it would be significantly harder to break into. Kerckhoff’s principle uses the idea that your system should be secure even if everything, but the key is disclosed to the whole world. So, even if your super-secret location is found, the cryptographic lock will be a whole different hurdle to overcome to finally gain access to that data. An ideal balance would be using a combination of obscurity and strong cryptographic techniques. 

